# 掌动山威开发文档
#### 开发者：高赛

> 主要技术
> 
> [网页：http://iecard.wh.sdu.edu.cn](http://iecard.wh.sdu.edu.cn)
> 
> 采用爬虫技术，爬取网页，拿到登录成功后的sessionId作为身份秘要进行模拟请求
> 
> 部分数据采用图像识别技术
> 


*******

> 提示
> 
> 掌动山威APP无后台，因此数据只和一卡通自身的服务器交互，因此我们不获取用户数据，保证用户信息安全

## 目录

- 爬虫技术
- 登录部分技术
- 充值部分技术
- 一卡通挂失技术

## 爬虫技术
浏览器本身不安全行，在浏览器上打开开发者模式，可以看到网页的每次请求，在网络栏可以了解用户操作的api请求，这问题是互联网普遍存在的，阿里巴巴的月饼事件也是采用的这种技术。

## 登录部分

简要：通过用户输入的学号，密码和图片验证码，然后通过POST请求，访问浏览器上的获取到的api，解析html判断是否登录，登录成功后，在APP的缓存区域保存用户的sessionId和学号。

## 充值部分

简要：从缓存中读取sessionId，读取用户输入的金额，采用图像识别技术让用户输入服务端加密的hash密码，拿到三个数据之后访问api模拟请求，解析html返回的数据，给出用户是否成功提示。

## 一卡通挂失

简要： 拿到采用图像识别技术让用户输入服务端加密的hash密码，用户确认挂失后，访问api，模拟请求，解析html，判断是否成功。

****

> 提示
> 
> 由于APP端采用爬虫技术，api取决于一卡通充值系统，所以如果一卡通系统出现变动，APP可能会出现一些崩溃，但是如果数据出现问题的话，那原因一定是一卡通系统存在漏洞。